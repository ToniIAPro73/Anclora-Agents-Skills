<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anclora Private Estates | SDD Project Hub ‚ú®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;600&family=Noto+Serif:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <!-- Additional fonts for visual skill sections -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: '#0A1F3D',
                        gold: '#C5A059',
                        bone: '#F9F7F2',
                        neutral: '#4A4A4A',
                        'navy-light': '#162e52',
                        'gold-light': '#d4b77e'
                    },
                    fontFamily: {
                        sans: ['Noto Sans', 'sans-serif'],
                        serif: ['Noto Serif', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #F9F7F2; color: #4A4A4A; }
        .chart-container { position: relative; width: 100%; max-width: 100%; height: 250px; }
        .nav-item.active { background-color: #C5A059; color: #0A1F3D; font-weight: 600; }
        .tree-line { border-left: 1px solid #e5e7eb; margin-left: 10px; padding-left: 15px; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Modal Animation */
        .modal-overlay { background: rgba(10, 31, 61, 0.8); backdrop-filter: blur(4px); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade { animation: fadeIn 0.3s ease-out; }
    </style>
</head>
<body class="h-screen flex overflow-hidden font-sans">

    <!-- Custom Modal / AI Message Box -->
    <div id="ai-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-overlay animate-fade">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col overflow-hidden">
            <div class="p-4 bg-navy text-white flex justify-between items-center">
                <h3 class="font-serif text-gold flex items-center gap-2">
                    ‚ú® Respuesta de Gemini IA
                </h3>
                <button onclick="closeModal()" class="text-white hover:text-gold text-xl">&times;</button>
            </div>
            <div id="modal-content" class="p-6 overflow-y-auto prose prose-sm max-w-none text-navy whitespace-pre-wrap leading-relaxed">
                <!-- AI Content goes here -->
            </div>
            <div class="p-4 border-t flex justify-end bg-gray-50">
                <button onclick="closeModal()" class="px-6 py-2 bg-navy text-white rounded hover:bg-navy-light transition-colors">Entendido</button>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading-spinner" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-white/50 backdrop-blur-sm">
        <div class="flex flex-col items-center">
            <div class="w-12 h-12 border-4 border-gold border-t-transparent rounded-full animate-spin"></div>
            <p class="mt-4 text-navy font-semibold animate-pulse">Consultando a Gemini...</p>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <aside class="w-64 bg-navy text-white flex flex-col shadow-2xl z-20">
        <div class="p-6 border-b border-white/10 flex items-center gap-3">
            <div class="w-10 h-10 bg-gold rounded-sm flex items-center justify-center text-navy font-serif font-bold text-xl">A</div>
            <div>
                <h1 class="font-serif text-lg leading-tight tracking-wide">ANCLORA</h1>
                <p class="text-xs text-gold tracking-widest uppercase">Private Estates</p>
            </div>
        </div>

        <nav class="flex-1 overflow-y-auto py-6 space-y-1 px-3">
            <button onclick="switchView('dashboard')" id="nav-dashboard" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5 active">
                üìä Project Dashboard
            </button>
            <button onclick="switchView('structure')" id="nav-structure" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                üìÇ Estructura Repositorio
            </button>
            <button onclick="switchView('specs')" id="nav-specs" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                üìù Especificaciones (SDD)
            </button>
            <button onclick="switchView('constitution')" id="nav-constitution" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                ‚öñÔ∏è Constituci√≥n & Reglas
            </button>
            <div class="pt-4 pb-2 px-4 text-[10px] uppercase tracking-widest text-white/30 font-bold">Herramientas IA</div>
            <button onclick="switchView('ai-lab')" id="nav-ai-lab" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5 flex items-center gap-2">
                ‚ú® Laboratorio IA
            </button>

            <!-- Skills Visual Navigation -->
            <div class="pt-4 pb-2 px-4 text-[10px] uppercase tracking-widest text-white/30 font-bold">Skills Visual</div>
            <button onclick="switchView('branding')" id="nav-branding" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                üé® Identidad & Branding
            </button>
            <button onclick="switchView('components')" id="nav-components" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                üß© Componentes Base
            </button>
            <button onclick="switchView('footer')" id="nav-footer" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                üßæ Footer Legal
            </button>
            <button onclick="switchView('legales')" id="nav-legales" class="nav-item w-full text-left px-4 py-3 rounded-md transition-all hover:bg-white/5">
                üìú Textos Legales
            </button>
        </nav>

        <div class="p-4 border-t border-white/10 text-xs text-white/40 text-center">
            v2.1.0 | Gemini Integrated
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col overflow-hidden relative">
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-8 shadow-sm">
            <h2 id="page-title" class="text-xl font-serif text-navy font-medium">Project Overview</h2>
            <div class="flex items-center gap-4">
                <span class="px-3 py-1 rounded-full bg-green-100 text-green-800 text-xs font-semibold">Status: AI Augmented</span>
                <span class="text-sm text-gray-500">Last update: 24 Jan 2026</span>
            </div>
        </header>

        <!-- Content Views -->
        <div class="flex-1 overflow-y-auto p-8 relative">

            <!-- VIEW: DASHBOARD -->
            <div id="view-dashboard" class="space-y-8 animate-fade-in">
                <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-gold flex justify-between items-start">
                    <div class="max-w-3xl">
                        <h3 class="text-navy font-serif text-lg mb-2">Resumen Ejecutivo del Proyecto</h3>
                        <p class="text-sm leading-relaxed">
                            Este dashboard centraliza la documentaci√≥n t√©cnica para la construcci√≥n de la plataforma <strong>Anclora Private Estates v2.0</strong>. 
                            Ahora con integraci√≥n ‚ú® Gemini para auditar la calidad del desarrollo en tiempo real.
                        </p>
                    </div>
                    <button onclick="aiAuditProject()" class="bg-navy text-gold px-4 py-2 rounded text-sm font-semibold flex items-center gap-2 hover:bg-navy-light transition-all">
                        ‚ú® Auditor√≠a de Proyecto
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h4 class="text-xs font-bold text-gray-400 uppercase mb-4">Target Performance (Lighthouse)</h4>
                        <div class="chart-container">
                            <canvas id="kpiChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h4 class="text-xs font-bold text-gray-400 uppercase mb-4">Project Phases</h4>
                        <div class="space-y-4" id="dashboard-plan-list"></div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm flex flex-col justify-center items-center text-center">
                         <h4 class="text-xs font-bold text-gray-400 uppercase mb-2">AI Tasks Status</h4>
                         <span class="text-5xl font-serif text-gold">Ready</span>
                         <p class="text-xs text-gray-500 mt-2 px-4">Utiliza los botones ‚ú® para expandir tareas o auditar c√≥digo.</p>
                    </div>
                </div>
            </div>

            <!-- VIEW: REPOSITORY STRUCTURE -->
            <div id="view-structure" class="hidden space-y-6">
                <div class="bg-white p-8 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-xl mb-6 flex items-center gap-2">
                        <span class="text-gold text-2xl">üìÇ</span> Estructura del Repositorio SDD
                    </h3>
                    <div class="font-mono text-sm bg-gray-50 p-6 rounded border border-gray-200 overflow-x-auto">
                        <ul class="space-y-2" id="repo-tree"></ul>
                    </div>
                </div>
            </div>

            <!-- VIEW: SPECS -->
            <div id="view-specs" class="hidden space-y-6">
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-navy font-serif text-xl">Plan T√©cnico (.specify/specs/core/plan.md)</h3>
                        <span class="bg-navy text-white text-xs px-2 py-1 rounded">Master Plan</span>
                    </div>
                    <div id="plan-container" class="space-y-4"></div>
                 </div>

                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-xl mb-4">Historias de Usuario (.specify/specs/core/spec.md)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="user-stories-container"></div>
                 </div>
            </div>

            <!-- VIEW: CONSTITUTION -->
            <div id="view-constitution" class="hidden space-y-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-navy text-white p-8 rounded-lg shadow-lg relative overflow-hidden">
                        <h3 class="font-serif text-2xl mb-6 text-gold">Opinionated Stack</h3>
                        <ul class="space-y-4" id="tech-stack-list"></ul>
                        <button onclick="aiAuditConstitution()" class="mt-8 border border-gold text-gold px-4 py-2 rounded text-sm hover:bg-gold hover:text-navy transition-all flex items-center gap-2">
                            ‚ú® Auditar Constituci√≥n
                        </button>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-sm border border-red-100">
                        <h3 class="font-serif text-2xl mb-6 text-red-800">‚õî Hard Guardrails</h3>
                        <div class="space-y-4" id="guardrails-list"></div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-lg mb-4">Identidad Visual Codificada</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="space-y-2"><div class="h-20 bg-navy rounded"></div><p class="text-xs font-mono">#0A1F3D (Navy)</p></div>
                        <div class="space-y-2"><div class="h-20 bg-gold rounded"></div><p class="text-xs font-mono">#C5A059 (Gold)</p></div>
                        <div class="space-y-2"><div class="h-20 bg-bone rounded border"></div><p class="text-xs font-mono">#F9F7F2 (Bone)</p></div>
                        <div class="space-y-2"><div class="h-20 bg-neutral rounded"></div><p class="text-xs font-mono">#4A4A4A (Neutral)</p></div>
                    </div>
                 </div>
            </div>

            <!-- VIEW: AI LAB -->
            <div id="view-ai-lab" class="hidden space-y-8 animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-navy">
                        <h3 class="text-navy font-serif text-xl mb-4">‚ú® Generador de C√≥digo Boilerplate</h3>
                        <p class="text-sm text-gray-600 mb-6">Describe un componente y Gemini generar√° el c√≥digo siguiendo la marca Anclora.</p>
                        <textarea id="ai-code-input" class="w-full h-32 p-3 border rounded mb-4 text-sm focus:ring-2 focus:ring-gold outline-none" placeholder="Ej: Un card de propiedad de lujo con precio, m2 y bot√≥n de WhatsApp..."></textarea>
                        <button onclick="aiGenerateCode()" class="w-full bg-gold text-navy font-bold py-3 rounded hover:bg-gold-light transition-all">Generar Componente React ‚ú®</button>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-gold">
                        <h3 class="text-navy font-serif text-xl mb-4">‚ú® Consultor√≠a de Marketing Luxury</h3>
                        <p class="text-sm text-gray-600 mb-6">Pregunta sobre estrategias para captar clientes UHNWI en Mallorca.</p>
                        <textarea id="ai-marketing-input" class="w-full h-32 p-3 border rounded mb-4 text-sm focus:ring-2 focus:ring-navy outline-none" placeholder="Ej: ¬øQu√© tono deber√≠a tener el anuncio para una villa de 15M‚Ç¨ en Port d'Andratx?"></textarea>
                        <button onclick="aiGetMarketingAdvice()" class="w-full bg-navy text-gold font-bold py-3 rounded hover:bg-navy-light transition-all">Obtener Consejos ‚ú®</button>
                    </div>
                </div>
            </div>

            <!-- VIEW: BRANDING -->
            <div id="view-branding" class="hidden space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-xl mb-4 flex items-center gap-2">
                        üé® Identidad Visual & Branding
                    </h3>
                    <h4 class="text-navy font-serif text-lg mb-2">Paleta de Colores</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded" style="background-color:#D4AF37"></div><p class="text-xs font-mono">Anclora Gold<br>#D4AF37</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded" style="background-color:#E6C96E"></div><p class="text-xs font-mono">Gold Light<br>#E6C96E</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded" style="background-color:#2C3E50"></div><p class="text-xs font-mono">Anclora Navy<br>#2C3E50</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded" style="background-color:#34495E"></div><p class="text-xs font-mono">Navy Light<br>#34495E</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded" style="background-color:#B9915F"></div><p class="text-xs font-mono">Bronze<br>#B9915F</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded" style="background-color:#C9A578"></div><p class="text-xs font-mono">Bronze Light<br>#C9A578</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded border" style="background-color:#F5F5F0"></div><p class="text-xs font-mono">Cream<br>#F5F5F0</p></div>
                        <div class="space-y-2 text-center"><div class="h-20 w-full rounded border" style="background-color:#1A1A1A"></div><p class="text-xs font-mono text-white">Black<br>#1A1A1A</p></div>
                    </div>
                    <h4 class="text-navy font-serif text-lg mt-6 mb-2">Tipograf√≠a</h4>
                    <div class="space-y-6">
                        <div>
                            <p class="text-4xl" style="font-family:'Playfair Display', serif;">Playfair Display</p>
                            <p class="text-sm text-gray-600">Elegante Serif para t√≠tulos y encabezados (H1, H2, H3).</p>
                        </div>
                        <div>
                            <p class="text-3xl" style="font-family:'Montserrat', sans-serif;">Montserrat</p>
                            <p class="text-sm text-gray-600">Sans-Serif moderno para cuerpo de texto, navegaci√≥n y botones.</p>
                        </div>
                    </div>
                    <h4 class="text-navy font-serif text-lg mt-6 mb-2">Reglas de Uso</h4>
                    <ul class="list-disc pl-6 text-sm space-y-1">
                        <li>Los CTAs principales deben usar el color <span style="color:#D4AF37" class="font-bold">Anclora Gold</span>.</li>
                        <li>Los encabezados y footers utilizan <span style="color:#2C3E50" class="font-bold">Anclora Navy</span>.</li>
                        <li>Los estados hover emplean tonos claros (ej: Gold Light).</li>
                        <li>El fondo general de las secciones es color Cream.</li>
                        <li>El texto principal utiliza color negro para m√°xima legibilidad.</li>
                    </ul>
                </div>
            </div>

            <!-- VIEW: COMPONENTS -->
            <div id="view-components" class="hidden space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-xl mb-4 flex items-center gap-2">üß© Componentes Base</h3>
                    <p class="text-sm text-gray-600 mb-6">Ejemplos de componentes reutilizables siguiendo el estilo Anclora.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Bot√≥n -->
                        <div class="border p-4 rounded-lg">
                            <h4 class="text-navy font-serif mb-3">Bot√≥n</h4>
                            <button class="bg-[#D4AF37] text-[#1A1A1A] px-4 py-2 rounded-md font-semibold hover:opacity-90 transition">Contactar Ahora</button>
                            <p class="text-xs text-gray-500 mt-3">Uso: Llamadas a la acci√≥n principales con color Gold y texto oscuro.</p>
                        </div>
                        <!-- Tarjeta -->
                        <div class="border p-4 rounded-lg">
                            <h4 class="text-navy font-serif mb-3">Tarjeta de Propiedad</h4>
                            <div class="bg-gray-100 rounded-md overflow-hidden shadow-sm">
                                <div class="h-32 bg-gray-300"></div>
                                <div class="p-4 space-y-2">
                                    <h5 class="font-serif text-lg text-navy">Villa Mediterr√°nea</h5>
                                    <p class="text-sm text-gray-600">4 hab ‚Ä¢ 3 ba√±os ‚Ä¢ 350 m¬≤</p>
                                    <p class="text-[#D4AF37] font-semibold">5.000.000 ‚Ç¨</p>
                                    <button class="mt-2 bg-[#0A1F3D] text-[#D4AF37] px-3 py-1 rounded hover:bg-[#162e52]">Contactar</button>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-3">Uso: Listados de propiedades con detalles y CTA.</p>
                        </div>
                        <!-- Header -->
                        <div class="border p-4 rounded-lg">
                            <h4 class="text-navy font-serif mb-3">Header</h4>
                            <div class="bg-[#0A1F3D] text-white p-4 rounded flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <div class="w-8 h-8 bg-[#D4AF37] rounded-sm flex items-center justify-center text-[#0A1F3D] font-serif font-bold">A</div>
                                    <span class="font-serif text-lg">ANCLORA</span>
                                </div>
                                <nav class="flex gap-4 text-sm">
                                    <a href="#" class="hover:text-[#D4AF37]">Inicio</a>
                                    <a href="#" class="hover:text-[#D4AF37]">Propiedades</a>
                                    <a href="#" class="hover:text-[#D4AF37]">Contacto</a>
                                </nav>
                            </div>
                            <p class="text-xs text-gray-500 mt-3">Uso: Barra superior con logo y navegaci√≥n.</p>
                        </div>
                        <!-- Footer sample -->
                        <div class="border p-4 rounded-lg">
                            <h4 class="text-navy font-serif mb-3">Footer</h4>
                            <div class="bg-[#0A1F3D] text-white p-4 rounded space-y-2">
                                <div class="flex justify-center gap-4">
                                    <span class="text-xs bg-gray-200 text-[#0A1F3D] px-2 py-1 rounded">GDPR</span>
                                    <span class="text-xs bg-gray-200 text-[#0A1F3D] px-2 py-1 rounded">ISO 9001</span>
                                    <span class="text-xs bg-gray-200 text-[#0A1F3D] px-2 py-1 rounded">EU REG</span>
                                </div>
                                <div class="flex flex-wrap justify-center gap-3 text-xs uppercase">
                                    <a href="#" class="text-white/70 hover:text-[#D4AF37]">Privacidad</a>
                                    <a href="#" class="text-white/70 hover:text-[#D4AF37]">Cookies</a>
                                    <a href="#" class="text-white/70 hover:text-[#D4AF37]">C√≥digo √âtico</a>
                                    <a href="#" class="text-white/70 hover:text-[#D4AF37]">T√©rminos B2B</a>
                                </div>
                                <div class="text-center text-[10px] text-white/40">
                                    ¬© 2026 ANCLORA NEXUS GROUP
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-3">Uso: Pie de p√°gina con certificaciones y enlaces legales.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: FOOTER -->
            <div id="view-footer" class="hidden space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-xl mb-4 flex items-center gap-2">üßæ Sistema Legal del Footer</h3>
                    <p class="text-sm text-gray-600 mb-6">Este footer incorpora certificaciones y enlaces legales obligatorios para todas las apps Anclora.</p>
                    <footer class="bg-[#0A1F3D] text-white p-8 rounded-lg space-y-6">
                        <!-- Badges -->
                        <div class="flex justify-center gap-12">
                            <div class="flex flex-col items-center gap-1">
                                <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-[#0A1F3D] font-bold text-xs">GDPR</div>
                                <span class="text-xs">GDPR</span>
                            </div>
                            <div class="flex flex-col items-center gap-1">
                                <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-[#0A1F3D] font-bold text-[10px]">ISO 9001</div>
                                <span class="text-xs">ISO 9001</span>
                            </div>
                            <div class="flex flex-col items-center gap-1">
                                <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-[#0A1F3D] font-bold text-[10px]">EU REG</div>
                                <span class="text-xs">EU REG</span>
                            </div>
                        </div>
                        <!-- Links -->
                        <div class="flex flex-wrap justify-center gap-x-8 gap-y-4 text-sm uppercase tracking-wider">
                            <a href="#" class="text-white/70 hover:text-[#D4AF37]">Pol√≠tica de Privacidad</a>
                            <a href="#" class="text-white/70 hover:text-[#D4AF37]">Pol√≠tica de Cookies</a>
                            <a href="#" class="text-white/70 hover:text-[#D4AF37]">C√≥digo √âtico</a>
                            <a href="#" class="text-white/70 hover:text-[#D4AF37]">T√©rminos B2B</a>
                        </div>
                        <!-- Copyright -->
                        <div class="text-center space-y-2">
                            <p class="text-xs text-white/40">¬© 2026 ANCLORA NEXUS GROUP. TODOS LOS DERECHOS RESERVADOS.</p>
                            <p class="text-xs text-white/30">ID: ANG-PRT-2026-EU | ANCLORA NEXUS STRATEGIC HOLDINGS</p>
                        </div>
                    </footer>
                </div>
            </div>

            <!-- VIEW: LEGALES -->
            <div id="view-legales" class="hidden space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-navy font-serif text-xl mb-4 flex items-center gap-2">üìú Textos Legales Obligatorios</h3>
                    <!-- Pol√≠tica de Privacidad -->
                    <h4 class="text-navy font-serif text-lg mt-4 mb-2">Pol√≠tica de Privacidad</h4>
                    <ul class="list-disc pl-6 text-sm space-y-1">
                        <li><strong>Responsable:</strong> Anclora Private Estates S.L., NIF B-XXXXXXXX, Paseo del Borne 15, 07012 Palma de Mallorca. Contacto: privacidad@ancloraprivateestates.com</li>
                        <li><strong>Datos Recopilados:</strong> Contacto, identificaci√≥n (DNI/NIE), datos profesionales/econ√≥micos y datos de navegaci√≥n. Nunca se recogen datos bancarios, de salud o ideolog√≠a.</li>
                        <li><strong>Finalidades:</strong> Gesti√≥n de consultas (24 meses), newsletter (hasta baja), visitas a propiedades (10 a√±os), partners B2B (duraci√≥n del contrato + 6 a√±os) y anal√≠tica web (26 meses).</li>
                        <li><strong>Destinatarios:</strong> Google Analytics, Mailchimp, Meta Pixel (EE.¬†UU. con garant√≠as), n8n y Twenty CRM (UE).</li>
                        <li><strong>Derechos:</strong> Acceso, rectificaci√≥n, supresi√≥n, limitaci√≥n, portabilidad, oposici√≥n y no decisiones automatizadas. Solicitud: privacidad@ancloraprivateestates.com.</li>
                        <li><strong>Seguridad:</strong> Cifrado SSL/TLS, cifrado en reposo, control de acceso RBAC, backups diarios, auditor√≠as trimestrales, certificaciones ISO 27001 y 9001.</li>
                        <li><strong>Marco legal:</strong> RGPD 2016/679, LOPDGDD 3/2018, LSSI-CE 34/2002 y Ley 10/2010.</li>
                    </ul>
                    <!-- Pol√≠tica de Cookies -->
                    <h4 class="text-navy font-serif text-lg mt-6 mb-2">Pol√≠tica de Cookies</h4>
                    <ul class="list-disc pl-6 text-sm space-y-1">
                        <li><strong>Cookies estrictamente necesarias:</strong> cookie-consent, NEXT_LOCALE, csrf-token, session-id (no requieren consentimiento).</li>
                        <li><strong>Cookies anal√≠ticas:</strong> _ga, _ga_*, _gid, _gat (Google Analytics) para identificar usuarios y sesiones (requieren consentimiento).</li>
                        <li><strong>Cookies de marketing:</strong> _fbp, fr (Meta Pixel) y _gcl_au (Google Ads) para publicidad dirigida (requieren consentimiento).</li>
                        <li><strong>Consentimiento:</strong> Banner con opciones Aceptar todas, Rechazar no esenciales y Configurar. Preferencias almacenadas 12 meses.</li>
                        <li><strong>Gesti√≥n:</strong> Se facilitan instrucciones para borrar o gestionar cookies en Chrome, Firefox, Safari y Edge, as√≠ como la opci√≥n de modo inc√≥gnito.</li>
                    </ul>
                    <!-- C√≥digo √âtico Corporativo -->
                    <h4 class="text-navy font-serif text-lg mt-6 mb-2">C√≥digo √âtico Corporativo</h4>
                    <ul class="list-disc pl-6 text-sm space-y-1">
                        <li><strong>Valores fundamentales:</strong> Confidencialidad, Integridad, Profesionalidad (40h formaci√≥n anual), Respeto y Diversidad, Sostenibilidad.</li>
                        <li><strong>Normas de conducta:</strong> Asesoramiento objetivo a clientes, transparencia con partners, prevenci√≥n de blanqueo de capitales (>10.000‚ÄØ‚Ç¨) y protecci√≥n de datos estricta.</li>
                        <li><strong>Responsabilidad social:</strong> Donaci√≥n del 0,5‚ÄØ% a la Fundaci√≥ Patrimoni Mallorca, pol√≠ticas paperless y flota h√≠brida, inversi√≥n √©tica.</li>
                        <li><strong>Cumplimiento:</strong> Comit√© de √©tica trimestral, canal de denuncias (etica@ancloraprivateestates.com) y r√©gimen sancionador.</li>
                    </ul>
                    <!-- T√©rminos y Condiciones B2B -->
                    <h4 class="text-navy font-serif text-lg mt-6 mb-2">T√©rminos y Condiciones B2B</h4>
                    <ul class="list-disc pl-6 text-sm space-y-1">
                        <li><strong>Requisitos de admisi√≥n:</strong> Licencia API vigente, seguro de RC profesional (‚â•300.000‚ÄØ‚Ç¨) y formaci√≥n actualizada en blanqueo de capitales.</li>
                        <li><strong>Proceso:</strong> Solicitud ‚Üí Revisi√≥n ‚Üí Entrevista ‚Üí Aprobaci√≥n ‚Üí Onboarding (10‚Äë15 d√≠as).</li>
                        <li><strong>Modelos de colaboraci√≥n:</strong> Referral (20‚ÄØ% comisi√≥n), Co-brokerage (50/50) y Exclusive Partnership (condiciones negociables).</li>
                    </ul>
                </div>
            </div>

        </div>
    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- Gemini API Config ---
        const apiKey = ""; // API Key se inyecta en ejecuci√≥n
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // --- Data ---
        const repoStructure = [
            { name: ".specify", type: "folder", children: [
                { name: "memory", type: "folder", children: [
                    { name: "constitution.md", type: "file", desc: "Reglas innegociables." },
                    { name: "decisions.md", type: "file", desc: "Registro ADR." }
                ]},
                { name: "specs", type: "folder", children: [
                    { name: "core", type: "folder", children: [
                        { name: "spec.md", type: "file" },
                        { name: "plan.md", type: "file" }
                    ]}
                ]}
            ]},
            { name: "src", type: "folder", children: [
                { name: "app", type: "folder" },
                { name: "components", type: "folder" }
            ]},
            { name: "tailwind.config.ts", type: "file" }
        ];

        const projectPlan = [
            { phase: "Fase 1: Setup", tasks: ["Inicializar Next.js 15", "Configurar Tailwind Tokens", "Validaci√≥n ENV (Zod)"] },
            { phase: "Fase 2: Layout", tasks: ["LuxuryBaseLayout", "Navigation i18n", "Branding Assets"] },
            { phase: "Fase 3: Propiedades", tasks: ["Property Interface", "Grid con Filtros Lifestyle", "SearchHero Component"] },
            { phase: "Fase 4: Integraci√≥n", tasks: ["n8n Webhooks", "WhatsApp Concierge Button"] }
        ];

        const userStories = [
            { role: "Inversor", title: "Navegaci√≥n por Estilo de Vida", desc: "Filtrar propiedades por categor√≠as como 'Frontline Sea' o 'Golf Living'." },
            { role: "Inversor", title: "Concierge Digital", desc: "Acceso directo a asesor v√≠a WhatsApp con contexto de propiedad." },
            { role: "Partner", title: "Sincronizaci√≥n CRM", desc: "Lead capture env√≠a datos enriquecidos a Twenty CRM v√≠a n8n." }
        ];

        const techStack = [
            "Next.js 15 (App Router)",
            "TypeScript (Strict Mode)",
            "Tailwind CSS (Custom Tokens)",
            "Twenty CRM + n8n",
            "Evolution API (WhatsApp)"
        ];

        const guardrails = [
            { icon: "üõë", title: "No Vibe-Coding", desc: "Especificaci√≥n previa obligatoria." },
            { icon: "üîê", title: "Seguridad", desc: "Validaci√≥n Zod para secretos." },
            { icon: "üé®", title: "Marca", desc: "Paleta Navy/Gold innegociable." }
        ];

        // --- API Helper ---
        async function callGemini(userQuery, systemPrompt) {
            showLoading(true);
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            let retries = 5;
            let delay = 1000;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) throw new Error('API Error');
                    
                    const result = await response.json();
                    showLoading(false);
                    return result.candidates?.[0]?.content?.parts?.[0]?.text || "No se obtuvo respuesta.";
                } catch (error) {
                    if (i === retries - 1) {
                        showLoading(false);
                        showModal("Error: No se pudo contactar con la IA despu√©s de varios intentos.");
                        return null;
                    }
                    await new Promise(res => setTimeout(res, delay));
                    delay *= 2;
                }
            }
        }

        // --- AI Actions ---
        async function aiAuditProject() {
            const query = `Analiza el estado del proyecto Anclora Private Estates. Plan: ${JSON.stringify(projectPlan)}`;
            const prompt = "Eres un auditor de proyectos Senior. Eval√∫a el plan t√©cnico y sugiere posibles riesgos o mejoras de lujo.";
            const res = await callGemini(query, prompt);
            if (res) showModal(res);
        }

        async function aiAuditConstitution() {
            const query = `Constituci√≥n: ${techStack.join(', ')}. Guardrails: ${JSON.stringify(guardrails)}`;
            const prompt = "Audita la constituci√≥n t√©cnica. ¬øEs lo suficientemente estricta para una app de ultra-lujo? Sugiere 3 reglas adicionales.";
            const res = await callGemini(query, prompt);
            if (res) showModal(res);
        }

        async function aiRefineUS(index) {
            const story = userStories[index];
            const query = `Refina esta historia de usuario: ${story.title} - ${story.desc}`;
            const prompt = "Eres un Product Owner experto en lujo. Expande esta US con criterios de aceptaci√≥n t√©cnicos y visuales de alta gama.";
            const res = await callGemini(query, prompt);
            if (res) showModal(res);
        }

        async function aiGenerateCode() {
            const input = document.getElementById('ai-code-input').value;
            if (!input) return;
            const prompt = "Genera c√≥digo de React (Next.js) con Tailwind CSS siguiendo los colores Navy (#0A1F3D) y Gold (#C5A059). El dise√±o debe ser minimalista y premium.";
            const res = await callGemini(input, prompt);
            if (res) showModal(res);
        }

        async function aiGetMarketingAdvice() {
            const input = document.getElementById('ai-marketing-input').value;
            if (!input) return;
            const prompt = "Eres un consultor de marketing inmobiliario de lujo en Mallorca. Da consejos estrat√©gicos y copy sugestivo.";
            const res = await callGemini(input, prompt);
            if (res) showModal(res);
        }

        // --- UI Utils ---
        function showLoading(show) {
            document.getElementById('loading-spinner').classList.toggle('hidden', !show);
        }

        function showModal(content) {
            document.getElementById('modal-content').innerText = content;
            document.getElementById('ai-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('ai-modal').classList.add('hidden');
        }

        function switchView(viewId) {
            // Lista de todas las vistas disponibles, incluidas las secciones de Skills Visual
            const views = ['dashboard','structure','specs','constitution','ai-lab','branding','components','footer','legales'];
            views.forEach(id => {
                const vEl = document.getElementById(`view-${id}`);
                if (vEl) vEl.classList.add('hidden');
                const nEl = document.getElementById(`nav-${id}`);
                if (nEl) nEl.classList.remove('active');
            });
            const activeView = document.getElementById(`view-${viewId}`);
            if (activeView) activeView.classList.remove('hidden');
            const activeNav = document.getElementById(`nav-${viewId}`);
            if (activeNav) activeNav.classList.add('active');
            const titles = {
                'dashboard':'Project Overview',
                'structure':'Estructura Repositorio',
                'specs':'Especificaciones',
                'constitution':'Constituci√≥n & Reglas',
                'ai-lab':'Laboratorio IA',
                'branding':'Identidad Visual',
                'components':'Componentes Base',
                'footer':'Footer Legal',
                'legales':'Textos Legales'
            };
            document.getElementById('page-title').innerText = titles[viewId] || viewId.replace('-', ' ').toUpperCase();
        }

        // --- Render Lists ---
        function renderAll() {
            // Plan en Dashboard
            const dashPlan = document.getElementById('dashboard-plan-list');
            projectPlan.forEach(p => {
                dashPlan.innerHTML += `
                    <div class="flex justify-between text-xs mb-1"><span>${p.phase}</span> <span class="text-gold">Ready</span></div>
                    <div class="w-full bg-gray-100 rounded-full h-1.5 mb-3"><div class="bg-navy h-1.5 rounded-full" style="width: 100%"></div></div>
                `;
            });

            // Tree
            renderTree(repoStructure, document.getElementById('repo-tree'));

            // Specs Plan
            const planContainer = document.getElementById('plan-container');
            projectPlan.forEach((p, i) => {
                planContainer.innerHTML += `
                    <div class="border-l-2 border-gray-200 pl-4 pb-4 relative">
                        <div class="absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full bg-gold"></div>
                        <div class="flex justify-between items-start">
                            <h4 class="font-bold text-navy text-sm">${p.phase}</h4>
                            <button onclick="aiAuditProject()" class="text-[10px] text-gold font-bold hover:underline">‚ú® Expandir IA</button>
                        </div>
                        <ul class="mt-2 space-y-1">
                            ${p.tasks.map(t => `<li class="text-xs text-gray-500">‚óã ${t}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });

            // Stories
            const storiesContainer = document.getElementById('user-stories-container');
            userStories.forEach((s, i) => {
                storiesContainer.innerHTML += `
                    <div class="p-4 border border-gray-100 rounded hover:border-gold transition-all relative group">
                        <button onclick="aiRefineUS(${i})" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-gold">‚ú®</button>
                        <span class="text-[10px] font-bold text-gold uppercase">${s.role}</span>
                        <h4 class="font-medium text-navy text-sm">${s.title}</h4>
                        <p class="text-xs text-gray-500 mt-1">${s.desc}</p>
                    </div>
                `;
            });

            // Constitution
            const stackList = document.getElementById('tech-stack-list');
            techStack.forEach(s => {
                stackList.innerHTML += `<li class="flex items-center gap-3 text-sm text-white/80"><span class="w-1.5 h-1.5 bg-gold rounded-full"></span> ${s}</li>`;
            });

            const guardList = document.getElementById('guardrails-list');
            guardrails.forEach(g => {
                guardList.innerHTML += `
                    <div class="flex gap-3">
                        <span class="text-lg">${g.icon}</span>
                        <div><h4 class="font-bold text-xs text-navy">${g.title}</h4><p class="text-[10px] text-gray-500">${g.desc}</p></div>
                    </div>
                `;
            });
        }

        function renderTree(nodes, parentElement) {
            nodes.forEach(node => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="${node.type==='folder'?'text-gold':'text-navy'}">${node.type==='folder'?'üìÅ':'üìÑ'}</span> <span class="font-medium">${node.name}</span>`;
                if (node.children) {
                    const ul = document.createElement('ul');
                    ul.className = "tree-line";
                    renderTree(node.children, ul);
                    li.appendChild(ul);
                }
                parentElement.appendChild(li);
            });
        }

        function initCharts() {
            const ctx = document.getElementById('kpiChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Performance', 'UX', 'AI Rigor', 'Lujo', 'SEO'],
                    datasets: [{
                        label: 'Target',
                        data: [95, 100, 100, 95, 100],
                        backgroundColor: 'rgba(197, 160, 89, 0.2)',
                        borderColor: '#C5A059',
                        borderWidth: 1,
                        pointRadius: 2
                    }]
                },
                options: { maintainAspectRatio: false, scales: { r: { ticks: { display: false } } }, plugins: { legend: { display: false } } }
            });
        }

        window.onload = () => {
            renderAll();
            initCharts();
        };
    </script>
    <!-- COOKIE CONSENT BANNER -->
    <div id="cookie-banner" class="fixed bottom-6 left-6 right-6 md:left-auto md:right-10 md:max-w-md z-[9999] hidden animate-in fade-in slide-in-from-bottom-10 duration-700">
      <div class="bg-[#0A1F3D] border border-[#C5A059]/30 text-white shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden font-['Montserrat']">
        <div class="h-1 bg-gradient-to-r from-[#C5A059] via-[#8D734A] to-[#C5A059]"></div>
        <div class="p-6">
          <!-- Simple view -->
          <div id="cookie-simple">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-8 h-8 bg-[#C5A059] flex items-center justify-center text-[#0A1F3D]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm4.086 9.172a1.172 1.172 0 11-2.343 0 1.172 1.172 0 012.343 0zm-6.915 4.243a1.172 1.172 0 11-2.343 0 1.172 1.172 0 012.343 0zm0-6.829a1.172 1.172 0 11-2.343 0 1.172 1.172 0 012.343 0z"/></svg>
              </div>
              <h3 class="font-serif italic text-lg tracking-tight" id="cookie-title"></h3>
            </div>
            <p class="text-[11px] text-white/70 leading-relaxed mb-6 italic" id="cookie-description"></p>
            <div class="flex flex-col gap-2">
              <button id="cookie-accept" class="w-full bg-[#C5A059] text-[#0A1F3D] py-3 text-[10px] font-bold uppercase tracking-[0.2em] hover:bg-[#dec28d] transition-all"></button>
              <button id="cookie-settings-button" class="w-full border border-white/20 text-white py-3 text-[10px] font-bold uppercase tracking-[0.2em] hover:bg-white/5 transition-all"></button>
            </div>
          </div>
          <!-- Settings view -->
          <div id="cookie-settings" class="hidden space-y-4">
            <div class="space-y-3 mb-6">
              <!-- Essential -->
              <div class="flex items-center justify-between border-b border-white/5 pb-2">
                <div>
                  <span class="text-[10px] font-bold text-white uppercase tracking-widest block" id="cookie-ess-title"></span>
                  <span class="text-[8px] text-white/40 italic" id="cookie-ess-desc"></span>
                </div>
                <div class="w-8 h-4 bg-[#C5A059] rounded-full relative opacity-50 cursor-not-allowed">
                  <div class="absolute right-0.5 top-0.5 w-3 h-3 bg-[#0A1F3D] rounded-full"></div>
                </div>
              </div>
              <!-- Analytics -->
              <div class="flex items-center justify-between border-b border-white/5 pb-2">
                <div>
                  <span class="text-[10px] font-bold text-white uppercase tracking-widest block" id="cookie-ana-title"></span>
                  <span class="text-[8px] text-white/40 italic" id="cookie-ana-desc"></span>
                </div>
                <button id="toggle-analytics" class="w-8 h-4 rounded-full relative transition-colors bg-white/20">
                  <div class="absolute top-0.5 left-0.5 w-3 h-3 bg-[#0A1F3D] rounded-full transition-all"></div>
                </button>
              </div>
              <!-- Marketing -->
              <div class="flex items-center justify-between border-b border-white/5 pb-2">
                <div>
                  <span class="text-[10px] font-bold text-white uppercase tracking-widest block" id="cookie-mar-title"></span>
                  <span class="text-[8px] text-white/40 italic" id="cookie-mar-desc"></span>
                </div>
                <button id="toggle-marketing" class="w-8 h-4 rounded-full relative transition-colors bg-white/20">
                  <div class="absolute top-0.5 left-0.5 w-3 h-3 bg-[#0A1F3D] rounded-full transition-all"></div>
                </button>
              </div>
            </div>
            <div class="flex gap-2">
              <button id="cookie-back" class="flex-1 border border-white/20 text-white py-3 text-[9px] font-bold uppercase tracking-widest hover:bg-white/5 transition-all"></button>
              <button id="cookie-save" class="flex-1 bg-[#C5A059] text-[#0A1F3D] py-3 text-[9px] font-bold uppercase tracking-widest hover:bg-[#dec28d] transition-all"></button>
            </div>
          </div>
          <div class="mt-6 pt-4 border-t border-white/10 flex justify-between items-center">
            <a href="#privacy" class="text-[8px] uppercase tracking-widest text-[#8D734A] hover:text-[#C5A059] transition-colors font-bold" id="cookie-policy-link"></a>
            <div class="flex items-center gap-1 text-[8px] font-bold text-white/30 uppercase">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"></path><path fill="#0A1F3D" d="M12 12l-4-2V6l4 2 4-2v4l-4 2z"></path></svg>
              <span id="cookie-gdpr-text"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
    // Cookie banner script with bilingual support and accessibility considerations
    (function() {
      const bannerEl = document.getElementById('cookie-banner');
      if (!bannerEl) return;
      const simpleEl = document.getElementById('cookie-simple');
      const settingsEl = document.getElementById('cookie-settings');
      // Translations dictionary
      const strings = {
        es: {
          title: 'Privacidad & Cookies',
          description: 'En Anclora Private Estates utilizamos tecnolog√≠as propias y de terceros para asegurar la excelencia en su navegaci√≥n y para cualificar el inter√©s en activos de inversi√≥n de lujo.',
          acceptAll: 'Aceptar Todas',
          settings: 'Configurar Preferencias',
          essentialTitle: 'T√©cnicas',
          essentialDesc: 'Inhabilitables por seguridad',
          analyticsTitle: 'An√°lisis',
          analyticsDesc: 'Optimizaci√≥n de experiencia UHNWI',
          marketingTitle: 'Marketing',
          marketingDesc: 'Ofertas exclusivas de inversi√≥n',
          back: 'Volver',
          save: 'Guardar',
          policy: 'Ver pol√≠tica completa',
          gdpr: 'GDPR Secure'
        },
        en: {
          title: 'Privacy & Cookies',
          description: 'At Anclora Private Estates we use first and third‚Äëparty technologies to ensure a great browsing experience and to qualify interest in luxury investment assets.',
          acceptAll: 'Accept All',
          settings: 'Manage Preferences',
          essentialTitle: 'Essential',
          essentialDesc: 'Non‚Äëdisableable for security',
          analyticsTitle: 'Analytics',
          analyticsDesc: 'Experience optimisation',
          marketingTitle: 'Marketing',
          marketingDesc: 'Exclusive investment offers',
          back: 'Back',
          save: 'Save',
          policy: 'View full policy',
          gdpr: 'GDPR Secure'
        }
      };
      const lang = (document.documentElement.lang || '').toLowerCase().startsWith('es') ? 'es' : 'en';
      const tr = strings[lang];
      // Populate textual elements
      document.getElementById('cookie-title').textContent = tr.title;
      document.getElementById('cookie-description').textContent = tr.description;
      document.getElementById('cookie-accept').textContent = tr.acceptAll;
      document.getElementById('cookie-settings-button').textContent = tr.settings;
      document.getElementById('cookie-ess-title').textContent = tr.essentialTitle;
      document.getElementById('cookie-ess-desc').textContent = tr.essentialDesc;
      document.getElementById('cookie-ana-title').textContent = tr.analyticsTitle;
      document.getElementById('cookie-ana-desc').textContent = tr.analyticsDesc;
      document.getElementById('cookie-mar-title').textContent = tr.marketingTitle;
      document.getElementById('cookie-mar-desc').textContent = tr.marketingDesc;
      document.getElementById('cookie-back').textContent = tr.back;
      document.getElementById('cookie-save').textContent = tr.save;
      document.getElementById('cookie-policy-link').textContent = tr.policy;
      document.getElementById('cookie-gdpr-text').textContent = tr.gdpr;
      // Preferences state
      let preferences = { analytics: false, marketing: false };
      function updateToggles() {
        const anaBtn = document.getElementById('toggle-analytics');
        const marBtn = document.getElementById('toggle-marketing');
        // analytics toggle styling
        if (preferences.analytics) {
          anaBtn.classList.remove('bg-white/20');
          anaBtn.classList.add('bg-[#C5A059]');
          anaBtn.querySelector('div').style.transform = 'translateX(1.5rem)';
          anaBtn.querySelector('div').style.right = '0.125rem';
          anaBtn.querySelector('div').style.left = '';
        } else {
          anaBtn.classList.add('bg-white/20');
          anaBtn.classList.remove('bg-[#C5A059]');
          anaBtn.querySelector('div').style.transform = 'translateX(0)';
          anaBtn.querySelector('div').style.left = '0.125rem';
          anaBtn.querySelector('div').style.right = '';
        }
        // marketing toggle styling
        if (preferences.marketing) {
          marBtn.classList.remove('bg-white/20');
          marBtn.classList.add('bg-[#C5A059]');
          marBtn.querySelector('div').style.transform = 'translateX(1.5rem)';
          marBtn.querySelector('div').style.right = '0.125rem';
          marBtn.querySelector('div').style.left = '';
        } else {
          marBtn.classList.add('bg-white/20');
          marBtn.classList.remove('bg-[#C5A059]');
          marBtn.querySelector('div').style.transform = 'translateX(0)';
          marBtn.querySelector('div').style.left = '0.125rem';
          marBtn.querySelector('div').style.right = '';
        }
      }
      document.getElementById('toggle-analytics').addEventListener('click', function() {
        preferences.analytics = !preferences.analytics;
        updateToggles();
      });
      document.getElementById('toggle-marketing').addEventListener('click', function() {
        preferences.marketing = !preferences.marketing;
        updateToggles();
      });
      document.getElementById('cookie-accept').addEventListener('click', function() {
        saveConsent({ analytics: true, marketing: true });
      });
      document.getElementById('cookie-settings-button').addEventListener('click', function() {
        simpleEl.classList.add('hidden');
        settingsEl.classList.remove('hidden');
        updateToggles();
      });
      document.getElementById('cookie-back').addEventListener('click', function() {
        settingsEl.classList.add('hidden');
        simpleEl.classList.remove('hidden');
      });
      document.getElementById('cookie-save').addEventListener('click', function() {
        saveConsent({ analytics: preferences.analytics, marketing: preferences.marketing });
      });
      function saveConsent(data) {
        const consentData = {
          essential: true,
          analytics: data.analytics,
          marketing: data.marketing,
          timestamp: new Date().toISOString(),
          version: '4.2.0'
        };
        localStorage.setItem('anclora_consent_v4.2', JSON.stringify(consentData));
        bannerEl.classList.add('hidden');
      }
      const existing = localStorage.getItem('anclora_consent_v4.2');
      if (!existing) {
        setTimeout(() => {
          bannerEl.classList.remove('hidden');
          bannerEl.setAttribute('aria-live','assertive');
        }, 1500);
      }
    })();
    </script>
    <!-- END COOKIE CONSENT BANNER -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. Single-file SPA. Gemini API Integrated with retry logic. -->

</body>
</html>